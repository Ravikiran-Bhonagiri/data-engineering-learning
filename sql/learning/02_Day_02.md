# ğŸ—“ï¸ Day 2: CRUD Operations

## ğŸ“š Topics Covered
- INSERT statements
- UPDATE with conditions
- DELETE and safety
- CASE expressions
- String functions

---

## ğŸ¯ Problem 1: Salary Classification
**Difficulty: Easy** | **Concept: CASE expression**

Classify employees: Junior (<$80K), Mid ($80K-$120K), Senior (>$120K).

```sql
-- Write your solution here
```

<details>
<summary>ğŸ’¡ Click for Solution</summary>

```sql
SELECT 
    name,
    salary,
    CASE 
        WHEN salary < 80000 THEN 'Junior'
        WHEN salary <= 120000 THEN 'Mid'
        ELSE 'Senior'
    END AS level
FROM employees
ORDER BY salary DESC;
```
</details>

---

## ğŸ¯ Problem 2: Email Domain Extraction
**Difficulty: Medium** | **Concept: String functions**

Extract unique email domains from employees.

```sql
-- Write your solution here
```

<details>
<summary>ğŸ’¡ Click for Solution</summary>

```sql
-- PostgreSQL
SELECT DISTINCT 
    SUBSTRING(email FROM POSITION('@' IN email) + 1) AS domain
FROM employees;

-- MySQL
SELECT DISTINCT 
    SUBSTRING_INDEX(email, '@', -1) AS domain
FROM employees;
```
</details>

---

## ğŸ¯ Problem 3: Update Salaries
**Difficulty: Easy** | **Concept: UPDATE**

Give 10% raise to Engineering department (department_id = 1).

```sql
-- Write your solution here
```

<details>
<summary>ğŸ’¡ Click for Solution</summary>

```sql
-- First, check current salaries
SELECT name, salary FROM employees WHERE department_id = 1;

-- Apply raise
UPDATE employees 
SET salary = salary * 1.10 
WHERE department_id = 1;

-- Verify
SELECT name, salary FROM employees WHERE department_id = 1;
```
</details>

---

## ğŸ¯ Problem 4: Pending Orders Total
**Difficulty: Easy** | **Concept: Filtering + Aggregation**

Find total count and value of pending orders.

```sql
-- Write your solution here
```

<details>
<summary>ğŸ’¡ Click for Solution</summary>

```sql
SELECT 
    COUNT(*) as pending_count,
    SUM(amount) AS pending_total
FROM orders
WHERE status = 'pending';
```
</details>

---

## ğŸ¯ Problem 5: Q1 2024 Orders
**Difficulty: Easy** | **Concept: Date filtering**

List all orders placed in Q1 2024 (Jan-Mar).

```sql
-- Write your solution here
```

<details>
<summary>ğŸ’¡ Click for Solution</summary>

```sql
SELECT customer_id, order_date, amount, status
FROM orders
WHERE order_date >= '2024-01-01' 
  AND order_date < '2024-04-01'
ORDER BY order_date;
```
</details>

---

## ğŸ¯ Problem 6: COALESCE for Defaults
**Difficulty: Medium** | **Concept: COALESCE**

Show employee name and manager_id, displaying 'No Manager' for NULLs.

```sql
-- Write your solution here
```

<details>
<summary>ğŸ’¡ Click for Solution</summary>

```sql
SELECT 
    name,
    COALESCE(manager_id::text, 'No Manager') as manager
FROM employees;
```
</details>

---

## ğŸ¯ Problem 7: Concatenate Strings
**Difficulty: Easy** | **Concept: CONCAT**

Create full address: "Customer Name - City".

```sql
-- Write your solution here
```

<details>
<summary>ğŸ’¡ Click for Solution</summary>

```sql
SELECT 
    CONCAT(name, ' - ', city) as full_address
FROM customers;

-- Or using ||
SELECT name || ' - ' || city as full_address
FROM customers;
```
</details>

---

## ğŸ¯ Problem 8: Safe Delete Practice
**Difficulty: Easy** | **Concept: DELETE**

Write a query to delete orders with amount < $100 (check first, don't run).

```sql
-- Write your solution here
```

<details>
<summary>ğŸ’¡ Click for Solution</summary>

```sql
-- Always check first!
SELECT * FROM orders WHERE amount < 100;

-- Then delete if needed
DELETE FROM orders WHERE amount < 100;

-- Better: Use transaction for safety
BEGIN;
DELETE FROM orders WHERE amount < 100;
-- ROLLBACK; if wrong
-- COMMIT; if correct
```
</details>

---

## ğŸ“ Day 2 Interview Questions

1. **What's the difference between DELETE and TRUNCATE?**
   - DELETE: Row by row, can use WHERE, logged, can rollback
   - TRUNCATE: All at once, faster, minimal logging, resets identity

2. **What's the difference between WHERE and HAVING?**
   - WHERE: Filters rows BEFORE grouping
   - HAVING: Filters groups AFTER aggregation

3. **How do you update multiple columns?**
   - `UPDATE table SET col1 = val1, col2 = val2 WHERE condition`

4. **What is COALESCE?**
   - Returns first non-NULL value from list

---

## âœ… Day 2 Checklist

- [ ] Completed all 8 problems
- [ ] Understand CASE expressions
- [ ] Can use UPDATE safely with WHERE
- [ ] Know string functions (CONCAT, SUBSTRING)
- [ ] Understand COALESCE for NULL handling
